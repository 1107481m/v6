function updateStriping(e){$(".list-even,.list-odd").removeClass("list-even list-odd");$(".list,.reorder-list").find(">div,tbody>tr").hover(function(){$(this).addClass("list-hover")},function(){$(this).removeClass("list-hover")});$(".list,.reorder-list").find(">div:nth-child(even),tbody>tr:nth-child(even)").addClass("list-even");$(".list,.reorder-list").find(">div:nth-child(odd),tbody>tr:nth-child(odd)").addClass("list-odd")}function pageChanged(e){var t=$(e).parents("form:first");if(t.length==1){if(t.attr("title")!==undefined){var n=t.attr("title");var r=n.length>1?n:""}if(!t.hasClass("no-change")){window.onbeforeunload=function(){return r}}}}function removeVariableFromURL(e,t){var n=String(e);var r=new RegExp("\\?"+t+"=[^&]*&?","gi");n=n.replace(r,"?");r=new RegExp("\\&"+t+"=[^&]*&?","gi");n=n.replace(r,"&");n=n.replace(/(\?|&)$/,"");r=null;return n}function updateAddressValues(e,t,n){if(t=="country"){$("#"+e+"_"+t+" option").filter(function(){return $(this).html()==n[t]}).first().attr("selected","selected");$("#"+e+"_"+t).trigger("change");if($("#"+e+"_state").get(0).tagName=="INPUT"){$("#"+e+"_state").val(n.state)}else{$("#"+e+"_state option").filter(function(){return $(this).html()==n.state}).attr("selected","selected")}}else{if(t!="state"){$("#"+e+"_"+t).val(n[t])}}}function inlineRemove(e){var t=$(e).attr("title");var n=$(e).attr("rel");var r=$(e).attr("href");var i=$(e).attr("name");if(t!=""&&!confirm(t)){return false}if(n&&!$(e).hasClass("dynamic")){var s=document.createElement("input");$(s).attr({type:"hidden",name:i+"[]"}).val(n);$(e).parents("form:first").append(s)}else{pageChanged(e)}var o=$(e).parents("tr:first,div:first:not(.tab_content)").get(0);$(o).remove();updateStriping();return false}function optionAdd(e,t){var t=$("#"+t);var e=$("#"+e);var n=$("#opt_mid :selected").parent().attr("label");var r=$("#opt_mid :selected").text();var s=typeof n==("undefined"||"")?r:"<strong>"+n+"</strong>: "+r;var o=$("#opt_mid").val();if(o!=""&&o!=0){var u=$(e).clone();$(u).find(".name").append(s).find("input:first").val(o).removeAttr("disabled");var a=$("input.data");for(i=0;i<a.length;i++){var f=$(a[i]).attr("rel");var l=$(a[i]).val()==(null||"")?"0":$(a[i]).val();var c=$(u).find("."+f).find("input:first");if(f=="matrix_include"){c.attr("name","option_add["+f+"]["+options_added+"]")}else{if(f=="set_enabled"){c.removeAttr("disabled");if(l==1){c.parent().addClass("selected");c.attr("checked","checked")}c.attr("name","option_add["+f+"]["+options_added+"]")}else{if(f=="negative"){c.removeAttr("disabled");if($(a[i]).is(":checked")){c.parent().addClass("selected");c.attr("checked","checked")}c.attr("name","option_add["+f+"]["+options_added+"]")}else{l=parseFloat(l,10).toFixed(2);$(u).find("."+f).append(l).find("input:first").val(parseFloat(l)).removeAttr("disabled")}}}$(a[i]).val("")}$(u).find("a.remove").on("click",function(){inlineRemove(this)});$(u).removeAttr("id");$("#opt_mid :selected").removeAttr("selected");$("#opt_mid:first-child").attr("selected","selected");$(t).append($(u));options_added++}return false}function ajaxSelected(e,t,n){var r=$("#val_admin_file").text();$("#result_"+t).val(e.id);switch(n.toLowerCase()){case"user":$.getJSON("./"+r,{_g:"xml",type:"address",q:e.id,"function":"search"},function(e){$("select.address-list>option.temporary").remove();for(var t=0;t<e.length;t++){var n=document.createElement("option");$(n).val(t);$(n).html(e[t].description);$(n).addClass("temporary");$(".address-list").append(n)}addresses=e});break;case"product":$("#add-price").val(e.data.price);$("#add-subtotal").html(($("#add-quantity").val()*e.data.price).toFixed(2));data=e.data;break}for(key in e.data){if(e.data[key]!=""){$("#ajax_"+key).val(e.data[key]).trigger("change")}}if($("#result_"+t).hasClass("clickSubmit")){$("#result_"+t).closest("form").submit()}}function ajaxSuggest(e,t,n){var r="./"+$("#val_admin_file").text();var i={_g:"xml",type:n,q:e,"function":"search"};$.get(r,i,function(e){var n=[];for(var r=0;r<e.length;r++){n.push({id:e[r].value,value:e[r].display,info:e[r].info,data:e[r].data})}t(n)},"json")}function ajaxNewsletter(e,t){var n=$("#val_admin_file").text();$.getJSON("./"+n,{_g:"xml",type:"newsletter",q:e,page:t,"function":"search"},function(n){$("div#progress_bar").css({width:n.percent+"%"});$("div#progress_bar_percent").text(Math.round(n.percent)+"%");if(n.percent==100||n.complete=="true"){window.onbeforeunload=null;window.location="?_g=customers&node=email"}else{ajaxNewsletter(e,t+1)}})}function updateOrderTotals(e){if(!e.hasClass("quantity")){e.val(($(this).val()*1).toFixed(2))}var t=e.parents(".update-subtotal:first");var n=$(t).find("input.quantity").val();var r=$(t).find("input.lineprice").val();var i=$(t).find("input.subtotal:first");var s=(n*r).toFixed(2);$(i).val(s);var o=0;$("input.subtotal").each(function(){var e=$(this).val()*1;o+=e});var u=$("#discount").val();u=u*1;var a=$("#discount_type").val();if(a=="p"){if(u>100){$("#discount").val("100");u=100}u=u/100*o;$("#discount_percent").html("%")}else{$("#discount_percent").html("")}$("#subtotal").val(o.toFixed(2));var f=$("#shipping").val();var l=0;$(".update-subtotal input.tax").each(function(){var e=$(this).val();l+=e*1});var c=o*1-u+f*1+l*1;$("#total_tax").val(l.toFixed(2));$("#total").val(c.toFixed(2))}function productOptionPrices(e){var t=$("#"+e+"_price");var n=+t.attr("original");var r="";$("span[rel="+e+"] select").each(function(){option_price=$(this).find("option:selected").attr("rel");if(option_price){r=option_price.substr(0,1);value=+option_price.substr(1);if(value>0){if(r=="+"){n=+n+ +value}else{if(r=="-"){n=+n- +value}}}}});$("span[rel="+e+"] input, span[rel="+e+"] textarea").each(function(){var e=$(this).val();var t=$(this).attr("rel");if(e!=""){if(t){r=t.substr(0,1);value=+t.substr(1);if(value>0){if(r=="+"){n=+n+ +value}else{if(r=="-"){n=+n- +value}}}}}});t.val(n.toFixed(2));$(".update-subtotal input.number").trigger("change");return false}$(document).ready(function(){setTimeout(function(){window.scrollTo(0,0)},1);var e=false;jQuery.debug=function(e){if(window.console){console.debug("CubeCart: "+e)}else{alert(e)}};jQuery.fn.insertAtCaret=function(e){return this.each(function(){if(document.selection){this.focus();sel=document.selection.createRange();sel.text=e;this.focus()}else{if(this.selectionStart||this.selectionStart=="0"){var t=this.selectionStart;var n=this.selectionEnd;var r=this.scrollTop;this.value=this.value.substring(0,t)+e+this.value.substring(n,this.value.length);this.focus();this.selectionStart=t+e.length;this.selectionEnd=t+e.length;this.scrollTop=r}else{this.value+=e;this.focus()}}})};jQuery.fn.confirmPassword=function(e){var t=jQuery.extend({updateOn:"keyup"},e);this.bind(t.updateOn,function(){jQuery(this).removeClass("ps-match ps-nomatch error");if(jQuery(this).val()!=""){var e=jQuery(this).attr("rel");if(jQuery("#"+e).val()===jQuery(this).val()&&jQuery(this).val()!=""){jQuery(this).addClass("ps-match")}else{jQuery(this).addClass("ps-nomatch error")}}})};jQuery.fn.exists=function(){return jQuery(this).length!=0};if(top.location.href!=self.location.href){top.location=self.location.href}$("input:text,input:password,textarea").each(function(){var e=$(this).attr("title");if(typeof e!="undefined"&&e.length>=1){if($(this).val()==""){$(this).val(e)}$(this).focus(function(){if($(this).val()==e){$(this).val("")}}).blur(function(){if($(this).val()==""){$(this).val(e)}}).parents("form:first").submit(function(){$("input:text,input:password,textarea",this).each(function(){if($(this).val()==e){$(this).val("")}})})}});if(typeof window.btoa=="function"){$("#php_code").change(function(){var e=window.btoa($(this).val());$("#php_code_base64").val(e)})}else{$("#php_code").prop("disabled",true);$("#php_code").val("This tool can only be used with recent Firefox, Chrome, Safari or Opera browsers.")}$(":input, :input:hidden").each(function(){if(!$(this).hasClass("original-fix")){$(this).attr("original",$(this).val())}}).change(function(){pageChanged(this)});$("input:submit.update").click(function(){$("select.required").removeClass("required")});$("select.update_form").change(function(){$("input.required").removeClass("required");$(this).parents("form").submit()});$("form").submit(function(){var t=true;e=false;if($("#inventory-list").exists()&&!$("input[name*=inv]").exists()){$(".inline-add:first").addClass("highlight");return false}$(".required-error").removeClass("required-error");$(":checkbox.ignore").each(function(){if($(this).not(":checked")){$(this).attr("disabled","disabled")}});var n=$("div.tab_content").exists()?$("div.tab_content:visible"):$(this);$(n).find(".required:input:not(:hidden)").each(function(){var e=$(this).val();var n=$(this).attr("original");if(e.replace(/\s/i,"")==""){var r=$(this).attr("id");$(this).addClass("required-error").change(function(){if($(this).val()!=$(this).attr("original")){$(this).removeClass("required-error");$("#error_"+r+".error").hide("fast")}});$("#error_"+r+".error").show("fast");t=false}});$(".inline-add:input").each(function(){var e=$(this).hasClass("not-empty");if($(this).val()!=$(this).attr("original")){$(this).parents(".inline-add:first").addClass("highlight");t=false}});$(n).find("select.required:not(:hidden)").each(function(){if($(this).val()==0){var e=$(this).attr("id");$(this).addClass("required-error").change(function(){if($(this).val()!=$(this).attr("original")){$(this).removeClass("required-error");$("#error_"+e+".error").hide("fast")}});$("#error_"+e+".error").show("fast");t=false}});if(t){window.onbeforeunload=null;return true}else{var r=$(".required-error:first");var i=r.position();$("html, body").animate({scrollTop:i.top-50},"slow")}e=true;return false});$(".check-all").click(function(e){if($(this).is("a")){e.preventDefault()}var t=$(this).attr("rel");var n=$("input[type=checkbox]."+t);n.prop("checked",!n.prop("checked"))});$("select.auto_submit").each(function(){if(!$(this).hasClass("show_submit")){$(this).parents("form:first").find("input:submit").hide()}}).change(function(){$(this).parents("form:first").submit()});$(".insert-text").on("click",function(){var e="#"+$(this).attr("target");var t=$(this).text();$(e).insertAtCaret(t);return false});$("img.autosubmit").each(function(){if($(this).hasClass("form-name")){var e=$(this).attr("rel");$("form#"+e).submit()}else{$(this).parents("form").submit()}});$(".duplicate").click(function(){var e=$(this).attr("rel")});if(typeof gui_message_json!="undefined"&&typeof gui_message_json=="object"){for(var t in gui_message_json){$("#"+t).addClass("required-error").val("")}}$(":input.required").blur(function(){var e=$(this).attr("id");if($(this).val().replace(/\s/i,"")==""){$(this).addClass("required-error")}else{$(this).removeClass("required-error")}});$("select.certificate-delivery").change(function(){if($(this).val()=="m"){$("#gc-method-e").slideUp().find("input").removeClass("required")}else{$("#gc-method-e").slideDown().find("input").addClass("required")}});$("select#country-list, select.country-list").each(function(){if(typeof county_list=="object"){var e=county_list[$(this).val()];var t=$(this).attr("rel")&&$(this).attr("id")!="country-list"?"#"+$(this).attr("rel"):"#state-list";if(typeof e=="object"){var n=$(t).val();var r=document.createElement("select");$(t).replaceWith($(r).attr({name:$(t).attr("name"),id:$(t).attr("id"),"class":$(t).attr("class")}));if($(this).attr("title")){var s=document.createElement("option");$("select"+t).append($(s).val("0").text($(this).attr("title")))}for(i in e){var s=document.createElement("option");if(n==e[i].name||n==e[i].id){$("select"+t).append($(s).val(e[i].id).text(e[i].name).attr("selected","selected"))}else{$("select"+t).append($(s).val(e[i].id).text(e[i].name))}}}else{if($(this).hasClass("no-custom-zone")){$(t).attr({disabled:"disabled"}).val($(this).attr("title"))}}}}).change(function(){if(typeof county_list=="object"){var e=county_list[$(this).val()];var t=$(this).attr("rel")&&$(this).attr("id")!="country-list"?"#"+$(this).attr("rel"):"#state-list";if(typeof e=="object"&&typeof county_list[$(this).val()]!="undefined"&&county_list[$(this).val()].length>=1){var n=$(t).val();var r=document.createElement("select");$(t).replaceWith($(r).attr({name:$(t).attr("name"),id:$(t).attr("id"),"class":$(t).attr("class")}));if($(this).attr("title")){var i=document.createElement("option");$("select"+t).append($(i).val("0").text($(this).attr("title")))}for(var s=0;s<e.length;s++){var i=document.createElement("option");$("select"+t).append($(i).val(e[s].id).text(e[s].name))}$("select"+t+" > option[value="+n+"]").attr("selected","selected")}else{var o=document.createElement("input");var u=$(o).attr({type:"text",id:$(t).attr("id"),name:$(t).attr("name"),"class":$(t).attr("class")});if($(this).hasClass("no-custom-zone")){$(u).attr("disabled","disabled").val($(this).attr("title"))}$(t).replaceWith($(u))}}});$("input[type=radio].rating").rating({required:true});updateStriping(".list,table,.reorder-list");$("a.preview").click(function(){$("#img-preview").attr("src",$(this).attr("href"));return false});$("a.delete, a.confirm, .submit_confirm, .install_confirm").click(function(){var e=$(this).attr("title");if(e!=""){return confirm(e.replace(/\\n/ig,"\n"))}});$("input:password.strength").pstrength();$("input:password.confirm").confirmPassword();$(".sublist").hide();$(".list-master").click(function(){$("#"+$(this).attr("rel")).toggle()});$(".contentswitch:not(:input)").hide();$(".contentswitch:input").click(function(){var e=$(this).val();$(".contentswitch:not(:input)").hide();$("#"+e+".contentswitch").show()});$("input.contentswitch:radio").attr("checked",false).parent().hide();$("#methods").hide();$(".selector:input").change(function(){$("input.contentswitch:radio").attr("checked",false).parent().hide();$(".contentswitch:not(:input)").hide();var e=$(this).val();if(e!=""){var t=transactions[e].methods.split(",");$("input.contentswitch:radio").each(function(){for(i=0;i<t.length;i++){if(t[i]==$(this).val()){$(this).parent().show();if(t.length==1){$(this).click()}}$(".transaction-amount").val(transactions[e].amount);$("#methods").show()}})}});$(".section-content").hide();$("select.section-select").change(function(){var e=$(this).val();$(".section-content").hide();$("#"+e+".section-content").show()});var n={lensWidth:250,lensHeight:250,link:true,delay:250};$("a.magnify").magnify(n);$("a.gallery").hover(function(){var e=$(this).attr("id");if(typeof gallery_json=="object"){$("a.magnify > img#preview").attr({src:gallery_json[e].medium});$("a.magnify").attr({href:gallery_json[e].source}).unbind().magnify(n)}});$("a.colorbox").colorbox({photo:true,slideshow:true,slideshowAuto:false});$("a.colorbox_iframe").colorbox({iframe:true,width:"80%",height:"80%"});$("a.colorbox_inline").colorbox({inline:true,width:"50%"});$(".login-toggle").each(function(){$(".login-method:not(:first)").slideUp()}).click(function(){if(!$(this).next(".login-method").is(":visible")){$(".login-method:visible").slideUp();$(this).next(".login-method").slideDown()}});if($("div#basket_summary").exists()){$("form.addForm").submit(function(){if(e){return false}var t=$(this).serialize();var n=$(this).attr("action").replace(/\?.*/,"");var r=$("div#basket_summary");var i=n.split("?");if(i.length>1){n+="&"}else{n+="?"}$.ajax({url:n+"_g=ajaxadd",type:"POST",cache:false,data:t,complete:function(e){if(e.responseText.match("Redir")){window.location=e.responseText.substr(6)}else{r.replaceWith(e.responseText);$("#gui_message").slideUp();$(".animate_basket").effect("shake",{times:4,distance:3},70)}}});return false})}$("#content_body").on("click",".check-primary",function(){var e=$(this).attr("rel");$("#"+e).parent().addClass("selected");$("#"+e+":checkbox").attr("checked","checked")});$("#quickTour").on("click",function(){$("#joyrideTour").joyride()});$("#rule-eu").click(function(){$("#country-region").toggle("slow",function(){})});$("a.colorbox.hostip").colorbox({iframe:true,innerHeight:"100px",innerWidth:"320px"});$("a.colorbox.wiki").bind("cbox_complete",function(){window.scrollTo(0,0)}).colorbox({iframe:true,innerHeight:"450px",innerWidth:"650px"});$("a.colorbox.paypal").colorbox({height:"433px",iframe:true,scrolling:false,width:"602px"});$("a.colorbox.address-form").colorbox({href:"#address-form",inline:true,innerHeight:"400px",innerWidth:"650px"});$("#loading_content").hide();$("div#progress_bar>img.newsletter").each(function(){window.onbeforeunload=function(){return true};ajaxNewsletter($("#newsletter_id").val(),1)});$("input:file.multiple").MultiFile({max:4,namePattern:"$name$i",remove:'<i class="fa fa-trash-o"></i>'});$("textarea.fck").each(function(){if($(this).hasClass("fck-full")){var e={path:"includes/ckeditor/",fullPage:true,toolbar:"CubeCart",selector:"textarea.fck"}}else{var e={path:"includes/ckeditor/",fullPage:false,toolbar:"CubeCart",selector:"textarea.fck"}}$(this).ckeditor(e)});$("div.fm-filelist").each(function(){var e=$("#val_admin_file").text();$(this).fileTree({root:"/",script:"./"+e,group:$(this).attr("rel"),name:$(this).attr("id")})});if(!$("div.tab").exists()){var r=$("div.tab_content:first").show().attr("id");var s="#"+r;$("#tab_"+r).addClass("tab-selected")}$("div.tab").each(function(){if(window.location.hash!==""&&$(window.location.hash).length>0){var e=window.location.hash;var t=e;$("div.tab_content:not("+e+")").hide();$("div.tab_content"+e).show();$("#tab_"+e.replace("#","")).addClass("tab-selected")}else{$("div.tab_content:not(:first)").hide();var e=$("div.tab_content:first").show().attr("id");var t="#"+e;$("#tab_"+e).addClass("tab-selected")}if($("#wikihelp").exists()){var n=$("#wikihelp").attr("href");var r=n.split("#");$("#wikihelp").attr("href",r[0]+t)}$("#previous-tab").val(t);$("input.previous-tab").val(t);window.scrollTo(0,0)}).on("click",function(){var e=$(this).children("a").attr("href");var t=$(e).height();if($("#navigation").height()<t){$("#page_content").height(t+100)}if(e=="#sidebar"){$("#sidebar_control").click();return false}else{if(e.match(/^#/)){document.location.hash=e;$(".tab").removeClass("tab-selected");$(this).addClass("tab-selected");$("div.tab_content").hide();$(e).show();window.scrollTo(0,0);$("#previous-tab").val(e);$("input.previous-tab").val(e);if($("#wikihelp").exists()){var n=$("#wikihelp").attr("href");var r=n.split("#");$("#wikihelp").attr("href",r[0]+e)}return false}}});$("select.select-skin").each(function(){var e=$(this).siblings("select.select-style");var t=$(this).siblings("input[type=hidden].default-style").val();if(json_skins[$(this).val()]){for(value in json_skins[$(this).val()]){var n=json_skins[$(this).val()][value];var r=document.createElement("option");$(r).val(value).text(n).addClass("dynamic");if(value==t){$(r).attr("selected","selected")}$(e).append(r)}}else{if($(this).hasClass("no-drop")){$(e).hide()}}$(this).on("change",function(){$(e).children("option.dynamic").remove();if(json_skins[$(this).val()]){for(value in json_skins[$(this).val()]){var t=json_skins[$(this).val()][value];var n=document.createElement("option");$(n).val(value).text(t).addClass("dynamic");$(e).append(n)}$(e).show()}else{if($(this).hasClass("no-drop")){$(e).hide()}}})});$("select.select-skin-mobile").each(function(){var e=$(this).siblings("select.select-style-mobile");var t=$(this).siblings("input[type=hidden].default-style-mobile").val();if(json_skins[$(this).val()]){for(value in json_skins[$(this).val()]){var n=json_skins[$(this).val()][value];var r=document.createElement("option");$(r).val(value).text(n).addClass("dynamic");if(value==t){$(r).attr("selected","selected")}$(e).append(r)}}else{if($(this).hasClass("no-drop")){$(e).hide()}}$(this).on("change",function(){$(e).children("option.dynamic").remove();if(json_skins[$(this).val()]){for(value in json_skins[$(this).val()]){var t=json_skins[$(this).val()][value];var n=document.createElement("option");$(n).val(value).text(t).addClass("dynamic");$(e).append(n)}$(e).show()}else{if($(this).hasClass("no-drop")){$(e).hide()}}})});$("span.editable").each(function(){if($(this).html()==""){$(this).html("<em>null</em>")}});$("span.editable").each(function(){$(this).attr("title","Click to edit")}).on("click",function(){var e=$(this).html();if(e=="<em>null</em>"){e=""}var t=$(this).attr("name");var n=$(this).attr("class");if($(this).hasClass("select")){var r=document.createElement("select");$.each(select_data,function(e,t){$(r).append('<option value="'+e+'">'+t+"</option>")});$(r).children(":contains("+e+")").attr("selected","selected")}else{var r=document.createElement("input");$(r).attr({type:"text",value:e}).addClass(n)}$(r).addClass("textbox");$(r).attr("name",t);$(this).replaceWith(r)});$(".reorder-list").sortable({axis:"y",handle:"a.handle",opacity:.7,placeholder:"reorder-position",placeholderElement:"> tr",revert:true,scroll:true,stop:function(e,t){updateStriping()}});$(".revert").each(function(){var e=$(this).attr("rel");if($("#defined_"+e).val()=="0"){$("#row_"+e).addClass("list-changed")}else{if($("#string_"+e).val()!=$("#default_"+e).val()){$("#row_"+e).addClass("custom-phrase")}else{$(this).hide()}}}).on("click",function(){var e=$(this).attr("rel");var t=$("#default_"+e).val();$("#string_"+e).val(t);$("#row_"+e).removeClass("custom-phrase");$(this).hide();return false});$(".editable_phrase").focusout(function(){var e=$(this).attr("rel");if($(this).val()!=$("#default_"+e).val()){$("#row_"+e).addClass("custom-phrase");$("#revert_"+e).show()}else{$("#revert_"+e).hide()}});$("input.ajax").autocomplete({timeout:5e3,ajax_get:ajaxSuggest,callback:ajaxSelected});$("select.field_select").each(function(){$(this).find("option:first").attr("selected","selected");$(this).parent().parent().find(".field_select_target:not(:first)").hide();if($(this).attr("id")=="select_group_id"){var e=$("option:selected",$(this)).val();$("#attr_source").attr("name","add_attr["+e+"]");$("#group_target").attr("target","group_"+e)}}).on("change",function(){if($(this).attr("id")=="select_group_id"){var e=$("option:selected",$(this)).val();$("#attr_source").attr("name","add_attr["+e+"]");$("#group_target").attr("target","group_"+e)}$(this).parent().parent().find(".field_select_target").hide();if($(this).val()!=""){var t="#"+$(this).attr("rel")+$(this).val();$(t).show();$("#"+$(t).attr("rel")).show()}});$.datepicker.setDefaults({changeMonth:true,constrainInput:true,dateFormat:"yy-mm-dd",hideIfNoPrevNext:true,onSelect:function(e){var t=e.split("-",3);$(this).nextAll("input.date:first").datepicker("option","minDate",new Date(t[0],t[1]-1,t[2]))},showStatus:false});$("input.date").datepicker();window.scrollTo(0,0);var o=$("#navigation").height();var u=$("#page_content").height();if(o>u){$("#page_content").height(o+100)}$('input[type="checkbox"]').each(function(){if(!$(this).parent().hasClass("custom-checkbox")){$(this).wrap("<div class='custom-checkbox'></div>")}if($(this).is(":checked")){$(this).parent().addClass("selected")}else{$(this).parent().removeClass("selected")}});$("body").on("click","img.checkbox, .check-primary, .check_cat, .check-all, .custom-checkbox",function(){$('input[type="checkbox"]').each(function(){if($(this).is(":checked")){$(this).parent().addClass("selected")}else{$(this).parent().removeClass("selected")}})})});var new_option=0;var data=false;if(!addresses||typeof addresses!="object"){var addresses=new Object}var options_added=0;$("#inventory-list").on("change","select.options_calc",function(){productOptionPrices($(this).parent().attr("rel"))});$("#inventory-list").on("focusout",".text_calc",function(){productOptionPrices($(this).parent().attr("rel"))});var inline_add_offset=0;$('a.add, a.inline-add, input[type="button"].add').on("click",function(){var e=$(this).attr("target");var t=$(this).parents(".inline-add:first");var n=$(t).next(".inline-source");var r=new Array;var i=true;$(".inline-add").removeClass("highlight");$(":input",t).each(function(){$(this).removeClass("required-error");var e=$(this).attr("rel");var t=$(this).val();if($(this).hasClass("not-empty")&&t==$(this).attr("original")){$(this).on("change",function(){if($(this).val()!=$(this).attr("original")){$(this).removeClass("required-error")}}).addClass("required-error");i=false}r[e]=t});if(i==false){return false}$(t).removeClass("highlight");if($(n).length==1){var s=$(n).attr("name");var o=$(n).clone(true).attr({name:""}).removeAttr("id").removeClass("inline-source");var u=$("#val_admin_file").text();$(t).find(":input").each(function(){var e=$(this).attr("rel");var t=$(this).val();var n;if($(this).is("select")){var r=$(this).find("option:selected").text()}else{var r=$(this).val()}if(e=="product_id"&&t>0){$.ajax({url:"./"+u,type:"GET",cache:false,data:{_g:"xml",type:"prod_options",q:t,"function":"template"},complete:function(e){n=e.responseText.split("inv[]").join("inv_add["+(inline_add_offset-1)+"]");n=n.split('rel=""').join('rel="'+(inline_add_offset-1)+'"');$(o).find("[rel=product_options]").html(n)}})}else{if(e=="price"){$(o).find(":input[rel="+e+"]").attr("id",inline_add_offset+"_price")}}$(o).find(":input[rel="+e+"]").val(t).attr({name:s+"["+inline_add_offset+"]["+e+"]",original:t});$(o).find("[rel="+e+"]:not(:input)").text(r)});$(t).find(":input").each(function(){$(this).val($(this).attr("original"))})}else{var o=document.createElement("div");var a=document.createElement("span");var f=document.createElement("a");var l=document.createElement("i");if($('input[name="add_div_class"]')){$(o).addClass($('input[name="add_div_class"]').val())}$(l).attr({"class":"fa fa-trash"});$(f).attr({href:"#"}).addClass("remove dynamic").append(l);$(a).addClass("actions").append(f);$(this).parents("div:first,tr:first").find(".add:input").each(function(){if($(this).hasClass("display")){if($(this).val()==""){i=false}var e=$(this).is("select")?$(this).find(":selected").text():"<strong>"+$(this).val()+"</strong>";$(o).append(e)}if($(this).attr("name")){var t=document.createElement("input");$(t).attr({type:"hidden",name:$(this).attr("name"),value:$(this).val()});$(o).append(t)}$(this).val("")});$(o).prepend(a)}if(i==true&&e.length>1&&$("#"+e).length==1){$("#"+e).append(o)}else{$(t).before(o)}$(".update-subtotal input.number").trigger("change");inline_add_offset++;updateStriping();return false});$("a.duplicate").on("click",function(){var e=$(this).attr("rel");var t=$(this).attr("target").length>=1?$(this).attr("target"):"";$("."+e+":input").each(function(){var e=$("#"+t+$(this).attr("id"));$(e).val($(this).val());if($(this).attr("id")=="sum_country"){$(e).trigger("change")}});return false});$("#search-placeholder").on("click",function(){$("#sidebar_contain").animate({left:"0px"});return false});$("#sidebar_contain").on("mouseleave",function(){$(this).animate({left:"-340px"});return false});$("div#tab_sidebar").on("click",function(){var e=$("#sidebar_contain");var t=e.position();if(t.left==0){e.animate({left:"-340px"})}else{e.animate({left:"0px"})}return false});$(".option-edit").on("click",function(){var e=$(this).attr("rel");var t=$("#data_"+e).val().split("|");$("#opt_assign_id").val(e);$("#opt_mid").val(t[0]);$("#opt_price").val(t[1]);$("#opt_weight").val(t[2]);$("#opt_stock").val(t[3]);$(this).parent().parent().remove()});$("img.toggle-add").on("click",function(){$(this).attr("src",$(this).attr("src").match("add")?"images/icons/delete.png":"images/icons/add.png")});$(".delete_disabled").on("click",function(){alert($(this).attr("title"))});$("input#product_code").on("keyup",function(){if($("input#product_code").val().length>0){$("input#product_code_auto").attr("checked",false)}else{$("input#product_code_auto").attr("checked",true)}});$("input#product_code_auto").on("click",function(){var e=$("input#product_code_old").val();var t=$("input#product_code").val();if(t.length>0){$("input#product_code_old").val(t);$("input#product_code").val("")}else{$("input#product_code").val(e)}});$("#gui_message").on("click",function(){$(this).slideUp()});$("#seo").on("change",function(){var e=$("#val_admin_file").text();if($("#seo").val()==1){seo="seo_code"}else{seo="no_seo_code"}$.getJSON("./"+e,{_g:"xml",type:seo,"function":"get"},function(e){$("#htaccess").val(e.content)})});$("#cat_general").on("change","#cat_name",function(){$("#cat_general").on("click","#cat_save",function(){$("#dialog-seo").dialog({modal:true,buttons:{Yes:function(){$(this).dialog("close");$("#gen_seo").val("1");document.cat_form.submit()},No:function(){$(this).dialog("close");document.cat_form.submit()}}});return false})});$("#cat_general").on("change","#parent",function(){$("#cat_general").on("click","#cat_save",function(){$("#dialog-seo").dialog({modal:true,buttons:{Yes:function(){$(this).dialog("close");$("#gen_seo").val("1");document.cat_form.submit()},No:function(){$(this).dialog("close");document.cat_form.submit()}}});return false})});$("#cat_subset").on("change",function(){$location=document.URL.replace(/&?page=[0-9]/,"");if($location.indexOf("cat_id")!=-1){$location=removeVariableFromURL($location,"cat_id")}if($(this).val()!="any"){$location+="&cat_id="+$(this).val()}window.location.replace($location)});$("select.address-list").on("change",function(){var e=$(this).val();var t=addresses[e];var n=$(this).attr("rel")==""?"sum":$(this).attr("rel");var r=null;var i=n.indexOf(":");if(i>1){r=n.split(":")}for(var s in t){t[s]=jQuery.trim(t[s]);if(r!=null){for(j=0;j<r.length;j++){updateAddressValues(r[j],s,t)}}else{updateAddressValues(n,s,t)}}});$("a.select").on("click",function(){var e=$(this).attr("href");var t=$("#ckfuncnum").val();window.opener.CKEDITOR.tools.callFunction(t,e);window.close();return false});$("#discount_type, .lineprice").on("change",function(){$(".update-subtotal input.number").trigger("change")});$(".update-subtotal input.number").on("change",function(){updateOrderTotals($(this))});$("body").on("click","a.remove",function(){var e=$(this).attr("title");var t=$(this).attr("rel");var n=$(this).attr("href");var r=$(this).attr("name");if(e!=""&&!confirm(e)){return false}if(t&&!$(this).hasClass("dynamic")){var i=document.createElement("input");$(i).attr({type:"hidden",name:r+"[]"}).val(t);$(this).parents("form:first").append(i)}else{pageChanged(this)}if(r=="inv_remove"){$(this).parents("form:first").append('<input type="hidden" name="inv_remove[]" value="'+n.substring(1)+'" />')}if($(this).hasClass("tr")){var s=$(this).parents("tr:first")}else{var s=$(this).parents("tr:first,div:first:not(.tab_content)")}$(s).remove();$(".update-subtotal input.number").trigger("change");return false});$("a.refresh").on("click",function(){$(".update-subtotal input.number").trigger("change");return false})